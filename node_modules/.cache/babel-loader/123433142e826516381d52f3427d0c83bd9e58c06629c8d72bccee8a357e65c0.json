{"ast":null,"code":"var _jsxFileName = \"/home/jbj/front/src/components/VcIssueModal.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport './VcIssueModal.css';\n\n// 우리가 만든 목업 VC 발급 서버 주소\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MOCK_ISSUER_API_ENDPOINT = 'http://localhost:8083/issue-vc';\n// VC를 저장할 메인 백엔드 주소 (나중에 사용)\nconst SAVE_VC_API_ENDPOINT = 'http://localhost:8080/api/user/save-vc';\nfunction VcIssueModal({\n  onClose\n}) {\n  _s();\n  const [formData, setFormData] = useState({\n    name: '',\n    id: '',\n    did: ''\n  });\n  const [isLoading, setIsLoading] = useState(false);\n  const [issuedVC, setIssuedVC] = useState(null);\n  const [error, setError] = useState('');\n  const handleChange = e => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setIsLoading(true);\n    setError('');\n    setIssuedVC(null);\n    try {\n      // 1. 목업 VC 발급 서버에 이름, ID, DID를 보내 VC를 요청합니다.\n      const response = await axios.post(MOCK_ISSUER_API_ENDPOINT, formData);\n      const receivedVC = response.data.vc;\n      setIssuedVC(receivedVC);\n      alert('VC 발급 성공! 아래 VC를 복사하여 로그인 시 사용하세요.');\n\n      // 2. (추가 기능) 발급받은 VC를 메인 백엔드 DB에 저장합니다.\n      const token = localStorage.getItem('jwt_token');\n      if (token) {\n        await axios.post(SAVE_VC_API_ENDPOINT, {\n          vc: JSON.stringify(receivedVC)\n        }, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n      }\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setError(`VC 발급 실패: ${((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || err.message}`);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const copyToClipboard = text => {/* ... 복사 로직 ... */};\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"vc-modal-overlay\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"vc-modal-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"vc-modal-close\",\n        onClick: onClose,\n        children: \"\\xD7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uD83D\\uDCDC \\uC790\\uACA9\\uC99D\\uBA85(VC) \\uBC1C\\uAE09\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }, this), !issuedVC ? /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"VC\\uB97C \\uBC1C\\uAE09\\uBC1B\\uAE30 \\uC704\\uD574 \\uC815\\uBCF4\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"name\",\n          type: \"text\",\n          value: formData.name,\n          onChange: handleChange,\n          placeholder: \"\\uC774\\uB984\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"id\",\n          type: \"text\",\n          value: formData.id,\n          onChange: handleChange,\n          placeholder: \"\\uC544\\uC774\\uB514\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"did\",\n          type: \"text\",\n          value: formData.did,\n          onChange: handleChange,\n          placeholder: \"\\uBC1C\\uAE09\\uBC1B\\uC740 DID\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: isLoading,\n          children: isLoading ? '발급 중...' : 'VC 발급'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 25\n        }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: 'red'\n          },\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 35\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"issued-info-display\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"[\\uC911\\uC694] \\uBC1C\\uAE09\\uB41C VC \\uC815\\uBCF4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: JSON.stringify(issuedVC, null, 2),\n          readOnly: true,\n          rows: \"10\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => copyToClipboard(JSON.stringify(issuedVC)),\n          children: \"VC \\uBCF5\\uC0AC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 9\n  }, this);\n}\n_s(VcIssueModal, \"VpkdY6PIpW6Pr5lcPF97FEPU4fs=\");\n_c = VcIssueModal;\nexport default VcIssueModal;\nvar _c;\n$RefreshReg$(_c, \"VcIssueModal\");","map":{"version":3,"names":["React","useState","axios","jsxDEV","_jsxDEV","MOCK_ISSUER_API_ENDPOINT","SAVE_VC_API_ENDPOINT","VcIssueModal","onClose","_s","formData","setFormData","name","id","did","isLoading","setIsLoading","issuedVC","setIssuedVC","error","setError","handleChange","e","target","value","handleSubmit","preventDefault","response","post","receivedVC","data","vc","alert","token","localStorage","getItem","JSON","stringify","headers","err","_err$response","_err$response$data","message","copyToClipboard","text","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","onChange","placeholder","required","disabled","style","color","readOnly","rows","_c","$RefreshReg$"],"sources":["/home/jbj/front/src/components/VcIssueModal.js"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport './VcIssueModal.css';\n\n// 우리가 만든 목업 VC 발급 서버 주소\nconst MOCK_ISSUER_API_ENDPOINT = 'http://localhost:8083/issue-vc';\n// VC를 저장할 메인 백엔드 주소 (나중에 사용)\nconst SAVE_VC_API_ENDPOINT = 'http://localhost:8080/api/user/save-vc';\n\n\nfunction VcIssueModal({ onClose }) {\n    const [formData, setFormData] = useState({ name: '', id: '', did: '' });\n    const [isLoading, setIsLoading] = useState(false);\n    const [issuedVC, setIssuedVC] = useState(null);\n    const [error, setError] = useState('');\n\n    const handleChange = (e) => {\n        setFormData({ ...formData, [e.target.name]: e.target.value });\n    };\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        setIsLoading(true);\n        setError('');\n        setIssuedVC(null);\n\n        try {\n            // 1. 목업 VC 발급 서버에 이름, ID, DID를 보내 VC를 요청합니다.\n            const response = await axios.post(MOCK_ISSUER_API_ENDPOINT, formData);\n            const receivedVC = response.data.vc;\n            setIssuedVC(receivedVC);\n            alert('VC 발급 성공! 아래 VC를 복사하여 로그인 시 사용하세요.');\n\n            // 2. (추가 기능) 발급받은 VC를 메인 백엔드 DB에 저장합니다.\n            const token = localStorage.getItem('jwt_token');\n            if (token) {\n                await axios.post(SAVE_VC_API_ENDPOINT,\n                    { vc: JSON.stringify(receivedVC) },\n                    { headers: { 'Authorization': `Bearer ${token}` } }\n                );\n            }\n\n        } catch (err) {\n            setError(`VC 발급 실패: ${err.response?.data?.error || err.message}`);\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    const copyToClipboard = (text) => { /* ... 복사 로직 ... */ };\n\n    return (\n        <div className=\"vc-modal-overlay\">\n            <div className=\"vc-modal-content\">\n                <button className=\"vc-modal-close\" onClick={onClose}>&times;</button>\n                <h2>📜 자격증명(VC) 발급</h2>\n                {!issuedVC ? (\n                    <form onSubmit={handleSubmit}>\n                        <p>VC를 발급받기 위해 정보를 입력해주세요.</p>\n                        <input name=\"name\" type=\"text\" value={formData.name} onChange={handleChange} placeholder=\"이름\" required />\n                        <input name=\"id\" type=\"text\" value={formData.id} onChange={handleChange} placeholder=\"아이디\" required />\n                        <input name=\"did\" type=\"text\" value={formData.did} onChange={handleChange} placeholder=\"발급받은 DID\" required />\n                        <button type=\"submit\" disabled={isLoading}>{isLoading ? '발급 중...' : 'VC 발급'}</button>\n                        {error && <p style={{ color: 'red' }}>{error}</p>}\n                    </form>\n                ) : (\n                    <div className=\"issued-info-display\">\n                        <h3>[중요] 발급된 VC 정보</h3>\n                        <textarea value={JSON.stringify(issuedVC, null, 2)} readOnly rows=\"10\" />\n                        <button onClick={() => copyToClipboard(JSON.stringify(issuedVC))}>VC 복사</button>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n}\n\nexport default VcIssueModal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}