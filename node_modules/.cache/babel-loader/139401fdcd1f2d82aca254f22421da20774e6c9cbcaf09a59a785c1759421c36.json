{"ast":null,"code":"var _jsxFileName = \"/home/jbj/front/src/components/AgentMypage.js\",\n  _s = $RefreshSig$();\n// src/components/AgentMypage.js  (ÌòπÏùÄ MyPage.js)\nimport React, { useState, useRef, useEffect } from 'react';\nimport PropertyForm from './PropertyForm';\nimport PropertyList from './PropertyList';\nimport './MyPage.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function AgentMypage({\n  user\n}) {\n  _s();\n  const [properties, setProperties] = useState([]);\n  const didFetchRef = useRef(false);\n\n  // ‚îÄ‚îÄ 1) ÏµúÏ¥à ÎßàÏö¥Ìä∏ Ïãú & userÍ∞Ä Î∞îÎÄî Îïå, ÎÇ¥ Îß§Î¨º Î™©Î°ùÏùÑ Í∞ÄÏ†∏Ïò§Í∏∞ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n  useEffect(() => {\n    async function loadMyProperties() {\n      if (!user) {\n        setProperties([]);\n        return;\n      }\n      try {\n        const res = await fetch(`https://2094-165-229-229-106.ngrok-free.app/my-properties?user=${user.username}`);\n        const data = await res.json();\n        setProperties(Array.isArray(data.properties) ? data.properties : Array.isArray(data) ? data : []);\n      } catch {\n        setProperties([]);\n      }\n    }\n    if (!didFetchRef.current) {\n      loadMyProperties();\n      didFetchRef.current = true;\n    }\n  }, [user]);\n\n  // ‚îÄ‚îÄ 2) PropertyFormÏù¥ Îì±Î°ùÏóê ÏÑ±Í≥µÌïú Îí§ Ìò∏Ï∂úÎêòÎäî Ìï®Ïàò ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n  const refreshMyList = async () => {\n    if (!user) return;\n    try {\n      const res = await fetch(`https://2094-165-229-229-106.ngrok-free.app/my-properties?user=${user.username}`);\n      const data = await res.json();\n      setProperties(Array.isArray(data.properties) ? data.properties : Array.isArray(data) ? data : []);\n    } catch {\n      setProperties([]);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mypage-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\uD83C\\uDFE2 \\uC911\\uAC1C\\uC778 \\uB9C8\\uC774\\uD398\\uC774\\uC9C0\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"\\uC544\\uC774\\uB514:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 10\n      }, this), \" \", (user === null || user === void 0 ? void 0 : user.username) || (user === null || user === void 0 ? void 0 : user.id)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mypage-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uD83C\\uDFE0 \\uB9E4\\uBB3C \\uB4F1\\uB85D\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(PropertyForm, {\n        user: user,\n        onRegister: refreshMyList\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mypage-card\",\n      style: {\n        marginTop: '2rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uD83D\\uDCCB \\uB0B4 \\uB9E4\\uBB3C \\uBAA9\\uB85D\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(PropertyList, {\n        user: user,\n        mode: \"my\",\n        onReserve: refreshMyList\n        // ÏúÑ Ïª¥Ìè¨ÎÑåÌä∏Ï≤òÎüº refÎ•º ÏÇ¨Ïö©Ìï¥ ÏßÅÏ†ë fetchPropertiesÎ•º Ìò∏Ï∂úÌï¥ÎèÑ ÎêòÏßÄÎßå,\n        // Ïó¨Í∏∞ÏÑúÎäî onReserve ÏΩúÎ∞±ÏùÑ ÌÜµÌï¥ Î™©Î°ùÏùÑ Í∞±Ïã†ÌïòÎèÑÎ°ù ÌñàÏäµÎãàÎã§.\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n}\n_s(AgentMypage, \"VzNboxS9TSiT9LzunuS78r7eB+E=\");\n_c = AgentMypage;\nvar _c;\n$RefreshReg$(_c, \"AgentMypage\");","map":{"version":3,"names":["React","useState","useRef","useEffect","PropertyForm","PropertyList","jsxDEV","_jsxDEV","AgentMypage","user","_s","properties","setProperties","didFetchRef","loadMyProperties","res","fetch","username","data","json","Array","isArray","current","refreshMyList","className","children","fileName","_jsxFileName","lineNumber","columnNumber","id","onRegister","style","marginTop","mode","onReserve","_c","$RefreshReg$"],"sources":["/home/jbj/front/src/components/AgentMypage.js"],"sourcesContent":["// src/components/AgentMypage.js  (ÌòπÏùÄ MyPage.js)\nimport React, { useState, useRef, useEffect } from 'react';\nimport PropertyForm from './PropertyForm';\nimport PropertyList from './PropertyList';\nimport './MyPage.css';\n\nexport default function AgentMypage({ user }) {\n  const [properties, setProperties] = useState([]);\n  const didFetchRef = useRef(false);\n\n  // ‚îÄ‚îÄ 1) ÏµúÏ¥à ÎßàÏö¥Ìä∏ Ïãú & userÍ∞Ä Î∞îÎÄî Îïå, ÎÇ¥ Îß§Î¨º Î™©Î°ùÏùÑ Í∞ÄÏ†∏Ïò§Í∏∞ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n  useEffect(() => {\n    async function loadMyProperties() {\n      if (!user) {\n        setProperties([]);\n        return;\n      }\n      try {\n        const res = await fetch(\n          `https://2094-165-229-229-106.ngrok-free.app/my-properties?user=${user.username}`\n        );\n        const data = await res.json();\n        setProperties(\n          Array.isArray(data.properties)\n            ? data.properties\n            : Array.isArray(data)\n            ? data\n            : []\n        );\n      } catch {\n        setProperties([]);\n      }\n    }\n    if (!didFetchRef.current) {\n      loadMyProperties();\n      didFetchRef.current = true;\n    }\n  }, [user]);\n\n  // ‚îÄ‚îÄ 2) PropertyFormÏù¥ Îì±Î°ùÏóê ÏÑ±Í≥µÌïú Îí§ Ìò∏Ï∂úÎêòÎäî Ìï®Ïàò ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n  const refreshMyList = async () => {\n    if (!user) return;\n    try {\n      const res = await fetch(\n        `https://2094-165-229-229-106.ngrok-free.app/my-properties?user=${user.username}`\n      );\n      const data = await res.json();\n      setProperties(\n        Array.isArray(data.properties)\n          ? data.properties\n          : Array.isArray(data)\n          ? data\n          : []\n      );\n    } catch {\n      setProperties([]);\n    }\n  };\n\n  return (\n    <div className=\"mypage-container\">\n      <h2>üè¢ Ï§ëÍ∞úÏù∏ ÎßàÏù¥ÌéòÏù¥ÏßÄ</h2>\n      <p><strong>ÏïÑÏù¥Îîî:</strong> {user?.username || user?.id}</p>\n\n      <div className=\"mypage-card\">\n        <h2>üè† Îß§Î¨º Îì±Î°ù</h2>\n        <PropertyForm user={user} onRegister={refreshMyList} />\n      </div>\n\n      <div className=\"mypage-card\" style={{ marginTop: '2rem' }}>\n        <h2>üìã ÎÇ¥ Îß§Î¨º Î™©Î°ù</h2>\n        <PropertyList\n          user={user}\n          mode=\"my\"\n          onReserve={refreshMyList}\n          // ÏúÑ Ïª¥Ìè¨ÎÑåÌä∏Ï≤òÎüº refÎ•º ÏÇ¨Ïö©Ìï¥ ÏßÅÏ†ë fetchPropertiesÎ•º Ìò∏Ï∂úÌï¥ÎèÑ ÎêòÏßÄÎßå,\n          // Ïó¨Í∏∞ÏÑúÎäî onReserve ÏΩúÎ∞±ÏùÑ ÌÜµÌï¥ Î™©Î°ùÏùÑ Í∞±Ïã†ÌïòÎèÑÎ°ù ÌñàÏäµÎãàÎã§.\n        />\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}